@import "tailwindcss";

/* PoReflex — Custom Theme Variables */
@theme {
  --color-primary: #00ff00;
  --color-primary-glow: rgba(0, 255, 0, 0.3);
  --color-secondary: #ff8c00;
  --color-background: #000000;
  --color-surface: #0a0a0a;
  --color-grid: #1a1a1a;
  --color-error: #ff0000;
  --color-text: #00ff00;
  --color-text-muted: #666666;

  --font-mono: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas,
    "Liberation Mono", monospace;

  --spacing-safe-top: env(safe-area-inset-top, 0px);
  --spacing-safe-bottom: env(safe-area-inset-bottom, 0px);
  --spacing-safe-left: env(safe-area-inset-left, 0px);
  --spacing-safe-right: env(safe-area-inset-right, 0px);
}

/* ───── Base Styles ───── */
html,
body {
  @apply bg-background text-text font-mono antialiased;
  overscroll-behavior: none;
  touch-action: manipulation;
  user-select: none;
  -webkit-user-select: none;
  -webkit-tap-highlight-color: transparent;
}

html {
  position: fixed;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

body {
  position: fixed;
  width: 100%;
  height: 100%;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* ───── Utilities ───── */
@utility glow-primary {
  box-shadow: 0 0 15px var(--color-primary-glow);
}

@utility glow-secondary {
  box-shadow: 0 0 15px rgba(255, 140, 0, 0.3);
}

/* ───── Game Container ───── */
.game-container {
  @apply flex flex-col h-dvh w-full bg-background;
  padding-top: var(--spacing-safe-top);
  padding-bottom: var(--spacing-safe-bottom);
  padding-left: var(--spacing-safe-left);
  padding-right: var(--spacing-safe-right);
}

.game-stage {
  @apply relative flex-1 flex items-center justify-center overflow-hidden;
  height: 85dvh;
}

.control-zone {
  @apply flex items-center justify-center p-4;
  height: 15dvh;
}

/* ───── Stop Button ───── */
.stop-button {
  @apply w-full max-w-md h-full rounded-2xl text-3xl font-bold uppercase tracking-wider
    transition-all duration-150 ease-out select-none;
  @apply bg-primary text-background border-4 border-primary;
  touch-action: manipulation;
}

.stop-button:active:not(:disabled) {
  @apply scale-95;
}

.stop-button:disabled {
  @apply bg-grid text-text-muted border-grid cursor-not-allowed opacity-50;
}

/* ───── Leaderboard ───── */
.leaderboard {
  @apply w-full max-w-md mx-auto;
}

.leaderboard-toggle {
  @apply flex gap-2 mb-4;
}

.toggle-btn {
  @apply flex-1 py-2 px-4 rounded-lg text-sm font-bold uppercase tracking-wider
    transition-all duration-200;
  @apply bg-surface text-text-muted border border-grid;
}

.toggle-btn.active {
  @apply bg-primary text-background border-primary;
}

.leaderboard-list {
  @apply space-y-2;
}

.leaderboard-entry {
  @apply flex items-center gap-4 p-3 rounded-lg bg-surface border border-grid;
}

.leaderboard-entry.highlighted {
  @apply border-primary glow-primary;
}

.leaderboard-entry .rank {
  @apply text-lg font-bold w-12;
}

.leaderboard-entry .rank.gold {
  @apply text-yellow-400;
}

.leaderboard-entry .rank.silver {
  @apply text-gray-300;
}

.leaderboard-entry .rank.bronze {
  @apply text-amber-600;
}

.leaderboard-entry .nickname {
  @apply flex-1 truncate;
}

.leaderboard-entry .score {
  @apply text-secondary font-bold;
}

/* ───── Nickname Input ───── */
.nickname-input-wrapper {
  @apply w-full max-w-sm;
}

.nickname-input {
  @apply w-full px-4 py-3 rounded-lg text-lg font-mono
    bg-surface text-text border-2 border-grid
    focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary
    placeholder:text-text-muted;
}

.nickname-input.error {
  @apply border-error focus:border-error focus:ring-error;
}

.validation-error {
  @apply mt-2 text-sm text-error;
}

/* ───── Home Page ───── */
.home-container {
  @apply min-h-dvh flex flex-col items-center justify-start p-6 gap-8;
  padding-top: calc(var(--spacing-safe-top) + 1.5rem);
  padding-bottom: calc(var(--spacing-safe-bottom) + 1.5rem);
}

.home-header {
  @apply text-center;
}

.home-header h1 {
  @apply text-5xl font-bold text-primary mb-2;
}

.tagline {
  @apply text-lg text-text-muted;
}

.offline-status {
  @apply mt-2 text-sm text-secondary;
}

.nickname-form {
  @apply flex flex-col items-center gap-4 w-full max-w-sm;
}

.btn-play {
  @apply w-full py-4 rounded-xl text-xl font-bold uppercase tracking-wider
    transition-all duration-200;
  @apply bg-primary text-background;
}

.btn-play:disabled {
  @apply bg-grid text-text-muted cursor-not-allowed;
}

.btn-play:not(:disabled):hover {
  @apply glow-primary;
}

.leaderboard-section {
  @apply w-full max-w-md;
}

/* ───── Result / Failure Overlays ───── */
.result-overlay,
.failure-overlay {
  @apply absolute inset-0 flex flex-col items-center justify-center
    bg-background/90 backdrop-blur-sm p-6 text-center;
}

.result-overlay h2 {
  @apply text-4xl font-bold text-primary mb-4;
}

.average-time {
  @apply text-5xl font-bold text-secondary mb-2;
}

.result-label {
  @apply text-lg text-text-muted mb-6;
}

.reaction-times {
  @apply flex flex-wrap justify-center gap-2 mb-8;
}

.time-badge {
  @apply px-3 py-1 rounded-full text-sm bg-surface border border-grid;
}

.btn-submit,
.btn-retry,
.menu-button {
  @apply px-8 py-3 rounded-xl text-lg font-bold uppercase tracking-wider
    transition-all duration-200;
  @apply bg-primary text-background;
}

.btn-submit:hover,
.btn-retry:hover,
.menu-button:hover {
  @apply glow-primary;
}

.failure-overlay h2 {
  @apply text-4xl font-bold text-error mb-4;
}

.failure-detail {
  @apply text-lg text-text-muted mb-8;
}

/* ───── Loading / Empty State ───── */
.loading {
  @apply text-text-muted animate-pulse;
}

.empty-message {
  @apply text-center text-text-muted py-8;
}

/* ───── Diag Page ───── */
.diag-container {
  @apply min-h-dvh bg-background text-text font-mono p-6;
}

.diag-container h1 {
  @apply text-3xl font-bold text-primary mb-6;
}

.diag-section {
  @apply mb-6 p-4 rounded-lg bg-surface border border-grid;
}

.diag-section h2 {
  @apply text-xl font-bold text-secondary mb-3;
}

.diag-entry {
  @apply flex justify-between py-1 border-b border-grid last:border-b-0;
}

.diag-key {
  @apply text-text-muted;
}

.diag-value {
  @apply text-text font-bold;
}
